<div class="close-dialog">
    <button type="button" mat-icon-button [mat-dialog-close]="true">
        <mat-icon>close</mat-icon>
    </button>
</div>

<form class="busca-avancada" [formGroup]="buscaAvancadaFG">
    <h1>Parâmetros - Busca Avançada</h1>

    <mat-divider></mat-divider>

    <br/>

    <div class="row custom-row-padding">
        <div class="col-md-4 col-12">
            <mat-form-field class="custom-form-field">
                <mat-label>SEGMENTO</mat-label>
                <mat-select name="segmento" formControlName="segmento" [compareWith]="compareObjects" (selectionChange)="onChangeSegmento($event)">
                  <mat-option *ngFor="let option of segmentos" [value]="option">
                    {{ option.nome }}
                  </mat-option>
                </mat-select>
                <mat-hint>Selecione um segmento.</mat-hint>
            </mat-form-field>
        </div>

        <div class="col-md-4 col-12">
            <mat-form-field class="custom-form-field">
                <mat-label>CLUSTER</mat-label>
                <mat-select name="cluster" formControlName="cluster" [compareWith]="compareObjects" (selectionChange)="onChangeCluster($event)">
                  <mat-option *ngFor="let option of clusters" [value]="option">
                    {{ option.nome }}
                  </mat-option>
                </mat-select>
                <mat-hint>Selecione um cluster.</mat-hint>
            </mat-form-field>
        </div>

        <div class="col-md-4 col-12">
            <mat-form-field class="custom-form-field">
                <mat-label>POLÍTICA</mat-label>
                <mat-select name="politica" formControlName="politica" [compareWith]="compareObjects" (selectionChange)="onChangePolitica($event)">
                  <mat-option *ngFor="let option of politicas" [value]="option">
                    {{ option.nome }}
                  </mat-option>
                </mat-select>
                <mat-hint>Selecione uma política.</mat-hint>
            </mat-form-field>
        </div>
    </div>

    <br/>

    <div class="row custom-row-padding">
        <div class="col-md-4 col-12">
            <mat-form-field class="custom-form-field">
                <mat-label>VARIÁVEL</mat-label>
                <mat-select name="variavel" formControlName="variavel" [compareWith]="compareObjects" (selectionChange)="onChangeVariavel($event)">
                  <mat-option *ngFor="let option of variaveis" [value]="option">
                    {{ option.nome }}
                  </mat-option>
                </mat-select>
                <mat-hint>Selecione uma variável.</mat-hint>
            </mat-form-field>
        </div>
        
        <div class="col-md-4 col-12">
            <mat-form-field class="custom-form-field">
                <mat-label>STATUS</mat-label>
                <mat-select name="statuses" formControlName="statuses" [compareWith]="compareObjects" (selectionChange)="onChangeStatus($event)" multiple>
                  <mat-option *ngFor="let option of statuses" [value]="option"
                    [disabled]="buscaAvancadaFG.value['statuses'].length == 1 && buscaAvancadaFG.value['statuses'].includes(option)">
                    {{ option.nome }}
                  </mat-option>
                </mat-select>
                <mat-hint>Selecione um ou mais status.</mat-hint>
            </mat-form-field>
        </div>
    </div>

    <div class="row busca-avancada-footer">
        <div class="offset-md-4 col-md-4 col-12">
            <button mat-stroked-button color="primary" (click)="onClear()">
                LIMPAR
            </button>
        </div>

        <div class="col-md-4 col-12">
            <button mat-flat-button color="primary" [disabled]="!buscaAvancadaFG.valid"
                (click)="onSearch()">
                BUSCAR
            </button>
        </div>
    </div>
</form>